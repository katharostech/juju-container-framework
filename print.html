<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lucky - A charming framework for Juju</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="overview.html">Overview</a></li><li class="spacer"></li><li class="expanded "><a href="design.html"><strong aria-hidden="true">1.</strong> Design</a></li><li class="expanded "><a href="development.html"><strong aria-hidden="true">2.</strong> Development</a></li><li class="spacer"></li><li class="expanded "><a href="cli/lucky.html"><strong aria-hidden="true">3.</strong> Lucky CLI</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/charm.html"><strong aria-hidden="true">3.1.</strong> charm</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/charm/build.html"><strong aria-hidden="true">3.1.1.</strong> build</a></li><li class="expanded "><a href="cli/lucky/charm/create.html"><strong aria-hidden="true">3.1.2.</strong> create</a></li></ol></li><li class="expanded "><a href="cli/lucky/client.html"><strong aria-hidden="true">3.2.</strong> client</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/set-status.html"><strong aria-hidden="true">3.2.1.</strong> set-status</a></li><li class="expanded "><a href="cli/lucky/client/kv.html"><strong aria-hidden="true">3.2.2.</strong> kv</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/kv/get.html"><strong aria-hidden="true">3.2.2.1.</strong> get</a></li><li class="expanded "><a href="cli/lucky/client/kv/set.html"><strong aria-hidden="true">3.2.2.2.</strong> set</a></li><li class="expanded "><a href="cli/lucky/client/kv/delete.html"><strong aria-hidden="true">3.2.2.3.</strong> delete</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/container.html"><strong aria-hidden="true">3.2.3.</strong> container</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/container/image.html"><strong aria-hidden="true">3.2.3.1.</strong> image</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/container/image/get.html"><strong aria-hidden="true">3.2.3.1.1.</strong> get</a></li><li class="expanded "><a href="cli/lucky/client/container/image/set.html"><strong aria-hidden="true">3.2.3.1.2.</strong> set</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/container/apply-updates.html"><strong aria-hidden="true">3.2.3.2.</strong> apply-updates</a></li><li class="expanded "><a href="cli/lucky/client/container/env.html"><strong aria-hidden="true">3.2.3.3.</strong> env</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/container/env/get.html"><strong aria-hidden="true">3.2.3.3.1.</strong> get</a></li><li class="expanded "><a href="cli/lucky/client/container/env/set.html"><strong aria-hidden="true">3.2.3.3.2.</strong> set</a></li><li class="expanded "><a href="cli/lucky/client/container/env/delete.html"><strong aria-hidden="true">3.2.3.3.3.</strong> delete</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/container/set-entrypoint.html"><strong aria-hidden="true">3.2.3.4.</strong> set-entrypoint</a></li><li class="expanded "><a href="cli/lucky/client/container/set-command.html"><strong aria-hidden="true">3.2.3.5.</strong> set-command</a></li><li class="expanded "><a href="cli/lucky/client/container/volume.html"><strong aria-hidden="true">3.2.3.6.</strong> volume</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/container/volume/remove.html"><strong aria-hidden="true">3.2.3.6.1.</strong> remove</a></li><li class="expanded "><a href="cli/lucky/client/container/volume/add.html"><strong aria-hidden="true">3.2.3.6.2.</strong> add</a></li><li class="expanded "><a href="cli/lucky/client/container/volume/get.html"><strong aria-hidden="true">3.2.3.6.3.</strong> get</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/container/delete.html"><strong aria-hidden="true">3.2.3.7.</strong> delete</a></li><li class="expanded "><a href="cli/lucky/client/container/port.html"><strong aria-hidden="true">3.2.3.8.</strong> port</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/container/port/add.html"><strong aria-hidden="true">3.2.3.8.1.</strong> add</a></li><li class="expanded "><a href="cli/lucky/client/container/port/remove.html"><strong aria-hidden="true">3.2.3.8.2.</strong> remove</a></li><li class="expanded "><a href="cli/lucky/client/container/port/get.html"><strong aria-hidden="true">3.2.3.8.3.</strong> get</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/container/set-network.html"><strong aria-hidden="true">3.2.3.9.</strong> set-network</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/public-address.html"><strong aria-hidden="true">3.2.4.</strong> public-address</a></li><li class="expanded "><a href="cli/lucky/client/private-address.html"><strong aria-hidden="true">3.2.5.</strong> private-address</a></li><li class="expanded "><a href="cli/lucky/client/get-config.html"><strong aria-hidden="true">3.2.6.</strong> get-config</a></li><li class="expanded "><a href="cli/lucky/client/port.html"><strong aria-hidden="true">3.2.7.</strong> port</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/port/open.html"><strong aria-hidden="true">3.2.7.1.</strong> open</a></li><li class="expanded "><a href="cli/lucky/client/port/close.html"><strong aria-hidden="true">3.2.7.2.</strong> close</a></li><li class="expanded "><a href="cli/lucky/client/port/get-opened.html"><strong aria-hidden="true">3.2.7.3.</strong> get-opened</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/relation.html"><strong aria-hidden="true">3.2.8.</strong> relation</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/relation/get.html"><strong aria-hidden="true">3.2.8.1.</strong> get</a></li><li class="expanded "><a href="cli/lucky/client/relation/set.html"><strong aria-hidden="true">3.2.8.2.</strong> set</a></li><li class="expanded "><a href="cli/lucky/client/relation/list-units.html"><strong aria-hidden="true">3.2.8.3.</strong> list-units</a></li><li class="expanded "><a href="cli/lucky/client/relation/list-ids.html"><strong aria-hidden="true">3.2.8.4.</strong> list-ids</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/leader.html"><strong aria-hidden="true">3.2.9.</strong> leader</a></li><li><ol class="section"><li class="expanded "><a href="cli/lucky/client/leader/get.html"><strong aria-hidden="true">3.2.9.1.</strong> get</a></li><li class="expanded "><a href="cli/lucky/client/leader/set.html"><strong aria-hidden="true">3.2.9.2.</strong> set</a></li><li class="expanded "><a href="cli/lucky/client/leader/is-leader.html"><strong aria-hidden="true">3.2.9.3.</strong> is-leader</a></li></ol></li><li class="expanded "><a href="cli/lucky/client/random.html"><strong aria-hidden="true">3.2.10.</strong> random</a></li><li class="expanded "><a href="cli/lucky/client/get-resource.html"><strong aria-hidden="true">3.2.11.</strong> get-resource</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Lucky - A charming framework for Juju</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/katharostech/lucky" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#overview" id="overview">Overview</a></h1>
<p>Lucky is a work-in-progress framework for writing <a href="https://jaas.ai/">Juju</a> charms. It is being designed specifically to support writing Docker-powered charms easily. In the future the framework could be useful for more than Docker charms, but development is currently focused on providing facilities to run and configure Docker containers.</p>
<p>We want Lucky to be as easy to use as possible and be very well documented. We will focus on putting the developer's experience first, starting small and adding features as they become necessary or useful.</p>
<h2><a class="header" href="#developer-experience" id="developer-experience">Developer Experience</a></h2>
<p>The Lucky framework will provide a CLI that will be installed on the developers workstation that will be used to create and build Lucky charms. We will be focusing on making it easy to write charms in bash or any other shell language, but, through the Lucky commandline interface, any programming language could be used.</p>
<h2><a class="header" href="#development" id="development">Development</a></h2>
<p>We are very early in development. We have just started work on the proof of concept. We have a <a href="./design.html">design</a> document outlining our current plan for the framework. This may change as we get into development. If you have any questions or thoughts don't hesitate to <a href="overview.html#bugs-features-and-questions">contact us</a>.</p>
<h2><a class="header" href="#bugs-features-and-questions" id="bugs-features-and-questions">Bugs, Features, and Questions</a></h2>
<p>If you have any bug reports or feature requests you can create a <a href="https://tree.taiga.io/project/zicklag-lucky/issues">Taiga issue</a> and we'll see what we can do to help.</p>
<p>For questions or general discussion there is also a <a href="https://discourse.jujucharms.com/c/related-software/lucky">Lucky category</a> on the <a href="https://discourse.jujucharms.com">Juju forum</a>.</p>
<h1><a class="header" href="#design" id="design">Design</a></h1>
<p>The Lucky framework will be implemented in <a href="https://www.rust-lang.org/">Rust</a> and will consist of a daemon that runs as a part of the charm and a CLI that will be used by scripts to communicate to the daemon. The overall design can be seen in the diagram below.</p>
<p><img src="./assets/lucky-framework.svg" alt="charm-framework-diagram" /></p>
<h2><a class="header" href="#hooks" id="hooks">Hooks</a></h2>
<p>Just like every Juju charm, Lucky charms implement a number of different hooks that the Juju controller will execute. These hooks will not be implemented by the developer but will be provided by the Lucky charm template.</p>
<h3><a class="header" href="#install" id="install">Install</a></h3>
<p>The install hook will first download one of our automated builds of the Lucky framework, which will be a standalone Rust executable. The install hook will be sure to download the binary appropriate to the platform architecture.</p>
<p>After downloading the Lucky binary it will run the Lucky daemon.</p>
<blockquote>
<p><strong>Note:</strong> The Lucky binary also acts as the CLI that is used to communicate with the running daemon.</p>
</blockquote>
<h3><a class="header" href="#other-hooks" id="other-hooks">Other Hooks</a></h3>
<p>All of the other hooks are scripts that simply use the Lucky CLI to notify the Lucky daemon of the hook's execution and of the environment variables that came with the hook execution. It is then the Lucky daemon's job to trigger the appropriate user scripts.</p>
<h2><a class="header" href="#the-lucky-daemon-and-cli" id="the-lucky-daemon-and-cli">The Lucky Daemon and CLI</a></h2>
<p>The Lucky daemon will be run by the charm install hook and will continue running for the whole duration that the charm is installed. The daemon will listen on a Unix socket for commands that will be sent to it by the Lucky CLI.</p>
<p>As noted above, the daemon will be notified for every Juju hook that is executed. It is the daemon's job to, in response to the hooks, trigger the charm developer's own scripts and to be those scripts' interface to both Docker and the Juju hook environment.</p>
<p>When a developer writes scripts for Lucky charms, instead of using the normal Juju commands such as <code>set-status</code> and <code>get-relation</code> provided by the Juju hook environment, the scripts will use the Lucky CLI. The reason for this is that scripts executed inside of the Docker container will not have access to the Juju hook environment. By mounting the Lucky daemon's socket and the Lucky CLI into the Docker container, we provide a way for scripts inside of the container to interact with the Juju hook environment. The Lucky daemon will also set helpful environment variables that can be used by the scripts, including the ones that exist in the Juju hook environment.</p>
<p>The CLI will also provide commands to configure how the container is run, such as adding environment variables, ports, starting/stopping the container, etc. The charm scripts will not themselves execute Docker commands directly, but will use the Lucky CLI instead.</p>
<h2><a class="header" href="#charm-scripts" id="charm-scripts">Charm Scripts</a></h2>
<p>The charm developer will write two kinds of scripts, host scripts and container scripts. Both kinds of are essentially similar to the normal Juju hooks and can be any executable format. All of a charms container scripts will be mounted into the Docker container and will execute inside of the container while all of the host scripts will be run on the host. The scripts will be executed by the Lucky daemon in response to the Juju hooks as outlined in a YAML file that could look something like this:</p>
<p><strong>lucky.yml:</strong></p>
<pre><code class="language-yaml">hooks:
  install:
    - host_script: do-some-host-stuff.sh
    - container_script: do-some-stuff-in-container.sh
  update-status:
    - host_script: health-check-service-from-host.sh
    - container_script: make-sure-process-in-container-is-running.py
  config-changed:
    - container_script: update-application-config.sh
</code></pre>
<p>The scripts will be executed by the Lucky daemon in the order that they are defined in the YAML.</p>
<h1><a class="header" href="#development-1" id="development-1">Development</a></h1>
<h2><a class="header" href="#building-lucky" id="building-lucky">Building Lucky</a></h2>
<p>Lucky is written in Rust and can be built with cargo by running</p>
<pre><code>cargo build --release
</code></pre>
<p>The resulting binary named <code>lucky</code> will be in <code>target/release</code>. </p>
<h2><a class="header" href="#building-documentation" id="building-documentation">Building Documentation</a></h2>
<p>The documentation is built with <a href="https://github.com/rust-lang/mdBook/">mdbook</a>. The documentation is located in the <code>docs/book</code> folder. To host the docs locally you can navigate to the <code>docs/book</code> dir and run <code>mdbook serve</code>.</p>
<h3><a class="header" href="#cli-documentation" id="cli-documentation">CLI Documentation</a></h3>
<p>In addition to the book content in <code>docs/book</code>, the CLI documentation is automatically built by Lucky and can be built by running the doc generator in the root of the project:</p>
<pre><code>cargo run --features doc-gen docs/book/src/
</code></pre>
<blockquote>
<p><strong>Warning</strong> The <code>SUMMARY.md</code> file in <code>docs/book/src</code> will be automatically updated with the CLI documentation links when the doc generator is run. Do not put any links after the <code>Lucky CLI</code> link section or it will be overwritten.</p>
</blockquote>
<h1><a class="header" href="#lucky---the-lucky-charm-framwork-for-juju" id="lucky---the-lucky-charm-framwork-for-juju">Lucky - The Lucky charm framwork for Juju</a></h1>
<p>Welcome to the Lucky CLI. Lucky is a framework for creating Juju charms. The Lucky framework is designed to make it <em><strong>easy</strong></em> and <em><strong>fun</strong></em> to write charms that are powered by Docker containers.</p>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<p><code>lucky [FLAGS] [SUBCOMMAND]</code></p>
<h3><a class="header" href="#subcommands" id="subcommands">Subcommands</a></h3>
<ul>
<li><a href="cli/./lucky/charm.html">charm</a>: Build and create Lucky charms</li>
<li><a href="cli/./lucky/client.html">client</a>: Communicate with the Lucky daemon in charm scripts</li>
</ul>
<h2><a class="header" href="#development-2" id="development-2">Development</a></h2>
<p>If you are reading this now, you probably know that Lucky is under heavy development and is currently incomplete. This will hopefully change soon! Please pardon the missing features and documentation as we work to get out our first release.</p>
<p>If you have any thoughts don't be afraid to leave feedback on <a href="https://github.com/katharostech/lucky">GitHub</a> or ping/private message @zicklag on the <a href="https://discourse.jujucharms.com">Juju forum</a>.</p>
<h2><a class="header" href="#the-doc-pages-and-help" id="the-doc-pages-and-help">The Doc Pages and Help</a></h2>
<p>Most of the commands in the Lucky CLI have an extra doc page, like this one, that can be accessed with the <code>--doc</code> or <code>-H</code> flag. We will strive to make these built-in docs sufficient enough to learn to use Lucky without even using the internet!</p>
<p>Another useful thing to know is that you will get different output by using the <code>-h</code> and <code>--help</code> flags. The <code>-h</code> flag will give you more compact help output while the <code>--help</code> flag will give you more details on the available options.</p>
<h2><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h2>
<p>The first step to getting started with Lucky is to create your charm using the built-in charm template.</p>
<pre><code>$ lucky charm create [target_directory]
</code></pre>
<p>You will be prompted for some basic fields that it will fill out for you in the charm metadata. The doc page for <code>lucky charm create</code> has more information about what the different files in the charm are for.</p>
<p>Once you have tweak your new charm and added your own scripts you must build the charm. Building the charm packages it so that it can be deployed to a Juju server or the charm store.</p>
<pre><code>$ lucky charm build
</code></pre>
<p>That should complete almost immediately and you can then deploy the charm to a Juju controller:</p>
<pre><code>$ juju deploy build/charm_name</code></pre>
<h1><a class="header" href="#lucky-charm" id="lucky-charm">Lucky Charm</a></h1>
<p>The Lucky <code>charm</code> command contains the tools you will need for charm development.</p>
<h2><a class="header" href="#usage-1" id="usage-1">Usage</a></h2>
<p><code>charm [FLAGS] [SUBCOMMAND]</code></p>
<h3><a class="header" href="#subcommands-1" id="subcommands-1">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/./charm/build.html">build</a>: Build a Lucky charm and make it ready for deployment</li>
<li><a href="cli/lucky/./charm/create.html">create</a>: Create a new lucky charm</li>
</ul>
<h2><a class="header" href="#getting-started-1" id="getting-started-1">Getting Started</a></h2>
<p>The <code>lucky charm</code> command contains tools for creating and building your charms. These are the minimal essential tools for Lucky charm developers. You can see the doc pages for the <a href="cli/lucky/./charm/create.html"><code>create</code></a> and <a href="cli/lucky/./charm/build.html"><code>build</code></a> subcommands to learn more.</p>
<h2><a class="header" href="#publishing-charms" id="publishing-charms">Publishing Charms</a></h2>
<p>In order to publish your charms to the charm store you will need the sepparate Juju <a href="https://github.com/juju/charm-tools">charm tools</a>. After you have the charm tools installed, you can push your charm to the charm store:</p>
<pre><code class="language-bash"># Build the charm using Lucky
$ lucky charm build
# Login to the charm store
$ charm login
# Push the charm to the charm store
$ charm push build/charm_name
</code></pre>
<p>See the Juju <a href="https://jaas.ai/docs/charm-writing/store">documentation</a> for more information about publishing charms.</p>
<h1><a class="header" href="#build" id="build">build</a></h1>
<p>Build a Lucky charm and make it ready for deployment to the Juju server or charm store</p>
<h2><a class="header" href="#usage-2" id="usage-2">Usage</a></h2>
<p><code>build [FLAGS] [OPTIONS] [charm_dir]</code></p>
<h3><a class="header" href="#flags" id="flags">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-l</code>, <code>--use-local-lucky</code></td><td></td><td>Build charm with the local copy of lucky embedded. This means that the charm will not attempt to download lucky when it starts and that the charm will only run on the platform and architecture that the charm was built with. This is mostly useful during development and only works on Linux builds made with the "daemon" feature.
<p>If this is not specified, an automated build of lucky for the architecture that the charm is deployed to will be automatically downloaded when the charm is installed.</td></tr></p>
</tbody>
</table>
<h3><a class="header" href="#options" id="options">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-L</code>, <code>--log-level</code><code>&lt;log_level&gt;</code></td><td></td><td>The log level to build the charm with. Build with the log level set to "trace" to get more verbose logging from Lucky while the charm is running<br /><strong>default:</strong> <code>debug</code><br /><strong>possible values:</strong> <code>trace</code>, <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code></td></tr>
<tr><td><code>-b</code>, <code>--build-dir</code><code>&lt;build_dir&gt;</code></td><td></td><td>The directory to put the built charm in. Defaults to the <code>build</code> directory in the charm dir. The built charm will be in <code>build_dir/charm_name</code>.</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals" id="positionals">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;charm_dir&gt;</code></td><td></td><td>The path to the charm you want to build<br /><strong>default:</strong> <code>.</code></td></tr>
</tbody>
</table>
<h1><a class="header" href="#create" id="create">create</a></h1>
<p>Create a new lucky charm</p>
<h2><a class="header" href="#usage-3" id="usage-3">Usage</a></h2>
<p><code>create [FLAGS] [OPTIONS] [target_dir]</code></p>
<h3><a class="header" href="#flags-1" id="flags-1">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-D</code>, <code>--use-defaults</code></td><td></td><td>Do not prompt and use default values for unprovided fields</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-1" id="options-1">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-n</code>, <code>--name</code><code>&lt;charm_name&gt;</code></td><td></td><td>The name of the charm. Defaults to the target_dir</td></tr>
<tr><td><code>-d</code>, <code>--display-name</code><code>&lt;display_name&gt;</code></td><td></td><td>The display name of the charm ( may contain spaces )</td></tr>
<tr><td><code>-s</code>, <code>--summary</code><code>&lt;charm_summary&gt;</code></td><td></td><td>Short description of the charm</td></tr>
<tr><td><code>-m</code>, <code>--maintainer</code><code>&lt;charm_maintainer&gt;</code></td><td></td><td>The charm maintainer</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-1" id="positionals-1">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;target_dir&gt;</code></td><td></td><td>The directory to create the charm in</td></tr>
</tbody>
</table>
<h1><a class="header" href="#client" id="client">client</a></h1>
<p>Communicate with the Lucky daemon in charm scripts</p>
<h2><a class="header" href="#usage-4" id="usage-4">Usage</a></h2>
<p><code>client [FLAGS] [OPTIONS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#options-2" id="options-2">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-u</code>, <code>--unit-name</code><code>&lt;unit_name&gt;</code></td><td><code>JUJU_UNIT_NAME</code></td><td>The name of the Juju unit that this charm is running for. This is not required if <code>socket-path</code> has been specified.</td></tr>
<tr><td><code>-s</code>, <code>--socket-path</code><code>&lt;socket_path&gt;</code></td><td><code>LUCKY_DAEMON_SOCKET</code></td><td>The path to the daemon socket. If this is left unspecified the socket path will be automatically determined from the unit name. For example, for a unit named <code>mysql/2</code>, the socket path will be <code>/run/lucky_mysql_2.sock</code></td></tr>
</tbody>
</table>
<h3><a class="header" href="#subcommands-2" id="subcommands-2">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/./client/set-status.html">set-status</a>: Set the status of the current script</li>
<li><a href="cli/lucky/./client/kv.html">kv</a>: Get and set values in the unit key-value store</li>
<li><a href="cli/lucky/./client/container.html">container</a>: Manipulate the charm's container(s)</li>
<li><a href="cli/lucky/./client/public-address.html">public-address</a>: Get the public address of the unit</li>
<li><a href="cli/lucky/./client/private-address.html">private-address</a>: Get the private IP address of the unit</li>
<li><a href="cli/lucky/./client/get-config.html">get-config</a>: Get the charm configuration</li>
<li><a href="cli/lucky/./client/port.html">port</a>: Open and close ports on the firewall</li>
<li><a href="cli/lucky/./client/relation.html">relation</a>: Communicate over Juju relations</li>
<li><a href="cli/lucky/./client/leader.html">leader</a>: Communicate as/with unit leader</li>
<li><a href="cli/lucky/./client/random.html">random</a>: Generate random numbers and strings</li>
<li><a href="cli/lucky/./client/get-resource.html">get-resource</a>: Get the path to a Juju resource</li>
</ul>
<h1><a class="header" href="#set-status" id="set-status">set-status</a></h1>
<p>Set the status of the current script</p>
<h2><a class="header" href="#usage-5" id="usage-5">Usage</a></h2>
<p><code>set-status [FLAGS] --status-name &lt;status_name&gt; [ARGS]</code></p>
<h3><a class="header" href="#options-3" id="options-3">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-n</code>, <code>--status-name</code><code>&lt;status_name&gt;</code></td><td><code>LUCKY_SCRIPT_ID</code></td><td>The name of the status to set: defaults to the script's name. By default, setting the status will set the status only for the current script, leaving other statuses untouched. If you specify a name for the status other scripts can change that status by specifying the same name when calling <code>set-status</code>.</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-2" id="positionals-2">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;state&gt;</code></td><td></td><td>The enumerated state of the service<br /><strong>possible values:</strong> <code>active</code>, <code>waiting</code>, <code>maintenance</code>, <code>blocked</code></td></tr>
<tr><td><code>&lt;message&gt;</code></td><td></td><td>An optional message to provide with the state</td></tr>
</tbody>
</table>
<h1><a class="header" href="#kv" id="kv">kv</a></h1>
<p>Get and set values in the unit key-value store</p>
<h2><a class="header" href="#usage-6" id="usage-6">Usage</a></h2>
<p><code>kv [FLAGS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#subcommands-3" id="subcommands-3">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/./kv/get.html">get</a>: Get a value</li>
<li><a href="cli/lucky/client/./kv/set.html">set</a>: Set key-value data</li>
<li><a href="cli/lucky/client/./kv/delete.html">delete</a>: Delete a value</li>
</ul>
<h1><a class="header" href="#get" id="get">get</a></h1>
<p>Get a value from the key-value store. If you leave <code>key</code> unspecified, all key-value pairs will be printed out, one per line, in the format <code>key=value</code>.</p>
<h2><a class="header" href="#usage-7" id="usage-7">Usage</a></h2>
<p><code>get [FLAGS] [key]</code></p>
<h3><a class="header" href="#positionals-3" id="positionals-3">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>The key to get from the store</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set" id="set">set</a></h1>
<p>Set key-value data</p>
<h2><a class="header" href="#usage-8" id="usage-8">Usage</a></h2>
<p><code>set [FLAGS] &lt;data&gt;...</code></p>
<h3><a class="header" href="#positionals-4" id="positionals-4">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;data&gt;</code></td><td></td><td>The data to set on the relation as <code>key=value</code> pairs separated by spaces</td></tr>
</tbody>
</table>
<h1><a class="header" href="#delete" id="delete">delete</a></h1>
<p>Delete a value</p>
<h2><a class="header" href="#usage-9" id="usage-9">Usage</a></h2>
<p><code>delete [FLAGS] [key]</code></p>
<h3><a class="header" href="#positionals-5" id="positionals-5">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>The key to delete from the store</td></tr>
</tbody>
</table>
<h1><a class="header" href="#container" id="container">container</a></h1>
<p>Manipulate the charm's container(s)</p>
<h2><a class="header" href="#usage-10" id="usage-10">Usage</a></h2>
<p><code>container [FLAGS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#subcommands-4" id="subcommands-4">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/./container/image.html">image</a>: Get and set the Docker image</li>
<li><a href="cli/lucky/client/./container/apply-updates.html">apply-updates</a>: Apply pending container configuration updates</li>
<li><a href="cli/lucky/client/./container/env.html">env</a>: Get and set container environment variables</li>
<li><a href="cli/lucky/client/./container/set-entrypoint.html">set-entrypoint</a>: Set the docker entrypoint</li>
<li><a href="cli/lucky/client/./container/set-command.html">set-command</a>: Set the docker command</li>
<li><a href="cli/lucky/client/./container/volume.html">volume</a>: Configure container volumes</li>
<li><a href="cli/lucky/client/./container/delete.html">delete</a>: Delete the docker container</li>
<li><a href="cli/lucky/client/./container/port.html">port</a>: Add and remove container port bindings</li>
<li><a href="cli/lucky/client/./container/set-network.html">set-network</a>: Set the docker network</li>
</ul>
<h1><a class="header" href="#image" id="image">image</a></h1>
<p>Get and set the Docker image</p>
<h2><a class="header" href="#usage-11" id="usage-11">Usage</a></h2>
<p><code>image [FLAGS] [SUBCOMMAND]</code></p>
<h3><a class="header" href="#subcommands-5" id="subcommands-5">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/container/./image/get.html">get</a>: Get the container image</li>
<li><a href="cli/lucky/client/container/./image/set.html">set</a>: Set the container image</li>
</ul>
<h1><a class="header" href="#get-1" id="get-1">get</a></h1>
<p>Get the container image</p>
<h2><a class="header" href="#usage-12" id="usage-12">Usage</a></h2>
<p><code>get [FLAGS] [OPTIONS]</code></p>
<h3><a class="header" href="#options-4" id="options-4">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-1" id="set-1">set</a></h1>
<p>Set the container image</p>
<h2><a class="header" href="#usage-13" id="usage-13">Usage</a></h2>
<p><code>set [FLAGS] [OPTIONS] &lt;image&gt;</code></p>
<h3><a class="header" href="#flags-2" id="flags-2">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>--no-pull</code></td><td></td><td>Don't attempt to pull image before running container</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-5" id="options-5">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-6" id="positionals-6">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;image&gt;</code></td><td></td><td>The container image</td></tr>
</tbody>
</table>
<h1><a class="header" href="#apply-updates" id="apply-updates">apply-updates</a></h1>
<p>Apply pending container configuration updates</p>
<h2><a class="header" href="#usage-14" id="usage-14">Usage</a></h2>
<p><code>apply-updates [FLAGS]</code></p>
<h1><a class="header" href="#env" id="env">env</a></h1>
<p>Get and set container environment variables</p>
<h2><a class="header" href="#usage-15" id="usage-15">Usage</a></h2>
<p><code>env [FLAGS] [SUBCOMMAND]</code></p>
<h3><a class="header" href="#subcommands-6" id="subcommands-6">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/container/./env/get.html">get</a>: Get an environment variable</li>
<li><a href="cli/lucky/client/container/./env/set.html">set</a>: Set environment variables</li>
<li><a href="cli/lucky/client/container/./env/delete.html">delete</a>: Delete a value</li>
</ul>
<h1><a class="header" href="#get-2" id="get-2">get</a></h1>
<p>Get an environment variable from the container. If you leave <code>key</code> unspecified, all environment variables will be printed out, one per line, in the format <code>key=value</code>.</p>
<h2><a class="header" href="#usage-16" id="usage-16">Usage</a></h2>
<p><code>get [FLAGS] [OPTIONS] [key]</code></p>
<h3><a class="header" href="#options-6" id="options-6">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-7" id="positionals-7">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>The environment variable to get</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-2" id="set-2">set</a></h1>
<p>Set environment variables</p>
<h2><a class="header" href="#usage-17" id="usage-17">Usage</a></h2>
<p><code>set [FLAGS] [OPTIONS] &lt;vars&gt;...</code></p>
<h3><a class="header" href="#options-7" id="options-7">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-8" id="positionals-8">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;vars&gt;</code></td><td></td><td>The vars to set on the relation as <code>key=value</code> pairs separated by spaces. Setting values to a null string will remove the environment var.</td></tr>
</tbody>
</table>
<h1><a class="header" href="#delete-1" id="delete-1">delete</a></h1>
<p>Delete a value</p>
<h2><a class="header" href="#usage-18" id="usage-18">Usage</a></h2>
<p><code>delete [FLAGS] [OPTIONS] [key]</code></p>
<h3><a class="header" href="#options-8" id="options-8">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;container&gt;</code></td><td></td><td>The name of the container to delete the environment variable for</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-9" id="positionals-9">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>The key to delete from the store</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-entrypoint" id="set-entrypoint">set-entrypoint</a></h1>
<p>Set the docker entrypoint</p>
<h2><a class="header" href="#usage-19" id="usage-19">Usage</a></h2>
<p><code>set-entrypoint [FLAGS] [OPTIONS] [entrypoint]</code></p>
<h3><a class="header" href="#flags-3" id="flags-3">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-u</code>, <code>--unset</code></td><td></td><td>Unset the entrypoint instead of setting it. The container will use the default entrypoint.</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-9" id="options-9">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-10" id="positionals-10">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;entrypoint&gt;</code></td><td></td><td>The entrypoint for the container</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-command" id="set-command">set-command</a></h1>
<p>Set the docker command</p>
<h2><a class="header" href="#usage-20" id="usage-20">Usage</a></h2>
<p><code>set-command [FLAGS] [OPTIONS] [command]...</code></p>
<h3><a class="header" href="#flags-4" id="flags-4">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-u</code>, <code>--unset</code></td><td></td><td>Unset the command instead of setting it. The container will use the default command.</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-10" id="options-10">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-11" id="positionals-11">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;command&gt;</code></td><td></td><td>The command for the container</td></tr>
</tbody>
</table>
<h1><a class="header" href="#volume" id="volume">volume</a></h1>
<p>Configure container volumes</p>
<h2><a class="header" href="#usage-21" id="usage-21">Usage</a></h2>
<p><code>volume [FLAGS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#subcommands-7" id="subcommands-7">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/container/./volume/remove.html">remove</a>: Remove a volume from the container</li>
<li><a href="cli/lucky/client/container/./volume/add.html">add</a>: Add a volume to the container</li>
<li><a href="cli/lucky/client/container/./volume/get.html">get</a>: Get the list of volumes or the source for specific volume</li>
</ul>
<h1><a class="header" href="#remove" id="remove">remove</a></h1>
<p>Remove a volume from the container</p>
<h2><a class="header" href="#usage-22" id="usage-22">Usage</a></h2>
<p><code>remove [FLAGS] [OPTIONS] [container_path]</code></p>
<h3><a class="header" href="#flags-5" id="flags-5">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-D</code>, <code>--delete-data</code></td><td></td><td>Delete the actual backing data for the volume</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-11" id="options-11">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-12" id="positionals-12">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;target&gt;</code></td><td></td><td>The absolute path in the container of the volume you want to remove.</td></tr>
</tbody>
</table>
<h1><a class="header" href="#add" id="add">add</a></h1>
<p>Add a volume to the container.</p>
<p>Note: This command does not exhibit the same behaviour docker does when mounting an empty volume to an non-empty directory in the container. If you use this command to mount an empty volume to a non-empty path in the container the path in the container will be replaced by the empty volume. Please tell us if this is an issue for you by opening a forum topic: https://discourse.jujucharms.com/c/related-software/lucky</p>
<h2><a class="header" href="#usage-23" id="usage-23">Usage</a></h2>
<p><code>add [FLAGS] [OPTIONS] [ARGS]</code></p>
<h3><a class="header" href="#options-12" id="options-12">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-13" id="positionals-13">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;source&gt;</code></td><td></td><td>The source for the volume: either a name for a named volume or an absolute path on the host</td></tr>
<tr><td><code>&lt;target&gt;</code></td><td></td><td>The absolute path in the container to mount <code>source</code> to</td></tr>
</tbody>
</table>
<h1><a class="header" href="#get-3" id="get-3">get</a></h1>
<p>If <code>target</code> is provided and the volume exists, the source of the volume will be printed. If target is not provided, a list of volumes in the format source:target will be printed.</p>
<h2><a class="header" href="#usage-24" id="usage-24">Usage</a></h2>
<p><code>get [FLAGS] [OPTIONS] [container_path]</code></p>
<h3><a class="header" href="#options-13" id="options-13">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;container&gt;</code></td><td></td><td>The name of the container to delete the environment variable for</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-14" id="positionals-14">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;target&gt;</code></td><td></td><td>The absolute path, in the container, to the volume you want to get</td></tr>
</tbody>
</table>
<h1><a class="header" href="#delete-2" id="delete-2">delete</a></h1>
<p>Delete the docker container</p>
<h2><a class="header" href="#usage-25" id="usage-25">Usage</a></h2>
<p><code>delete [FLAGS] [OPTIONS]</code></p>
<h3><a class="header" href="#options-14" id="options-14">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h1><a class="header" href="#port" id="port">port</a></h1>
<p>Add and remove container port bindings</p>
<h2><a class="header" href="#usage-26" id="usage-26">Usage</a></h2>
<p><code>port [FLAGS] [SUBCOMMAND]</code></p>
<h3><a class="header" href="#subcommands-8" id="subcommands-8">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/container/./port/add.html">add</a>: Add a port binding</li>
<li><a href="cli/lucky/client/container/./port/remove.html">remove</a>: Remove a port binding</li>
<li><a href="cli/lucky/client/container/./port/get.html">get</a>: Get a list of the containers port bindings</li>
</ul>
<h1><a class="header" href="#add-1" id="add-1">add</a></h1>
<p>Add a port binding</p>
<h2><a class="header" href="#usage-27" id="usage-27">Usage</a></h2>
<p><code>add [FLAGS] [OPTIONS] [port_binding]</code></p>
<h3><a class="header" href="#options-15" id="options-15">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-15" id="positionals-15">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;port_binding&gt;</code></td><td></td><td>The port binding to add in the format: <code>host_port:container_port/proto</code>. the <code>/proto</code> suffix is optional and defaults to <code>/tcp</code>.</td></tr>
</tbody>
</table>
<h1><a class="header" href="#remove-1" id="remove-1">remove</a></h1>
<p>Remove a port binding</p>
<h2><a class="header" href="#usage-28" id="usage-28">Usage</a></h2>
<p><code>remove [FLAGS] [OPTIONS] [port_binding]</code></p>
<h3><a class="header" href="#flags-6" id="flags-6">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-A</code>, <code>--all</code></td><td></td><td>Remove all port bindings from the container</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-16" id="options-16">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-16" id="positionals-16">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;port_binding&gt;</code></td><td></td><td>The port binding to remove in the format: <code>host_port:container_port/proto</code>. the <code>/proto</code> suffix is optional and defaults to <code>/tcp</code>.</td></tr>
</tbody>
</table>
<h1><a class="header" href="#get-4" id="get-4">get</a></h1>
<p>Get a list of the containers port bindings</p>
<h2><a class="header" href="#usage-29" id="usage-29">Usage</a></h2>
<p><code>get [FLAGS] [OPTIONS]</code></p>
<h3><a class="header" href="#options-17" id="options-17">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-network" id="set-network">set-network</a></h1>
<p>Set the docker network</p>
<h2><a class="header" href="#usage-30" id="usage-30">Usage</a></h2>
<p><code>set-network [FLAGS] [OPTIONS] [network]</code></p>
<h3><a class="header" href="#flags-7" id="flags-7">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-u</code>, <code>--unset</code></td><td></td><td>Unset the network instead of setting it. The container will use the default bridge network.</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-18" id="options-18">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-c</code>, <code>--container</code><code>&lt;name&gt;</code></td><td></td><td>The name of the container to update. If not specified the default container will be used</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-17" id="positionals-17">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;network&gt;</code></td><td></td><td>The network for the container to use</td></tr>
</tbody>
</table>
<h1><a class="header" href="#public-address" id="public-address">public-address</a></h1>
<p>Get the public address of the unit, which may be a DNS name</p>
<h2><a class="header" href="#usage-31" id="usage-31">Usage</a></h2>
<p><code>public-address [FLAGS]</code></p>
<h1><a class="header" href="#private-address" id="private-address">private-address</a></h1>
<p>Get the private IP address of the unit</p>
<h2><a class="header" href="#usage-32" id="usage-32">Usage</a></h2>
<p><code>private-address [FLAGS]</code></p>
<h1><a class="header" href="#get-config" id="get-config">get-config</a></h1>
<p>Get the charm configuration</p>
<h2><a class="header" href="#usage-33" id="usage-33">Usage</a></h2>
<p><code>get-config [FLAGS] [key]</code></p>
<h3><a class="header" href="#positionals-18" id="positionals-18">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>The config key to get. If not specified all config values will be returned, one per line, in the format <code>key=value</code>.</td></tr>
</tbody>
</table>
<h1><a class="header" href="#port-1" id="port-1">port</a></h1>
<p>Open and close ports on the firewall. These only take effect when the charm is &quot;exposed&quot; through the Juju GUI or CLI.</p>
<h2><a class="header" href="#usage-34" id="usage-34">Usage</a></h2>
<p><code>port [FLAGS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#subcommands-9" id="subcommands-9">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/./port/open.html">open</a>: Open a port on the firewall</li>
<li><a href="cli/lucky/client/./port/close.html">close</a>: Close a port on the firewall</li>
<li><a href="cli/lucky/client/./port/get-opened.html">get-opened</a>: Get the ports opened by this charm</li>
</ul>
<h1><a class="header" href="#open" id="open">open</a></h1>
<p>Open a port on the firewall. A port range may be specified with an optional protocol as well ( TCP is default ). Example values: <code>8000-9000/udp</code>, <code>9000</code>.</p>
<h2><a class="header" href="#usage-35" id="usage-35">Usage</a></h2>
<p><code>open [FLAGS] &lt;port&gt;</code></p>
<h3><a class="header" href="#positionals-19" id="positionals-19">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;port&gt;</code></td><td></td><td>The port to open</td></tr>
</tbody>
</table>
<h1><a class="header" href="#close" id="close">close</a></h1>
<p>Close a port on the firewall. A port range may be specified with an optional protocol as well ( TCP is default ). Example values: <code>8000-9000/udp</code>, <code>9000</code>.</p>
<h2><a class="header" href="#usage-36" id="usage-36">Usage</a></h2>
<p><code>close [FLAGS] [port]</code></p>
<h3><a class="header" href="#flags-8" id="flags-8">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-A</code>, <code>--all</code></td><td></td><td>Remove all port rules</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-20" id="positionals-20">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;port&gt;</code></td><td></td><td>The port to close</td></tr>
</tbody>
</table>
<h1><a class="header" href="#get-opened" id="get-opened">get-opened</a></h1>
<p>Get the ports opened by this charm. This will return a line for each port or port range that has been opened in the format: <code>port-or-range/protocol</code>. For exmaple:</p>
<p>8000/tcp
10000-11000/udp</p>
<h2><a class="header" href="#usage-37" id="usage-37">Usage</a></h2>
<p><code>get-opened [FLAGS]</code></p>
<h1><a class="header" href="#relation" id="relation">relation</a></h1>
<p>Communicate over Juju relations</p>
<h2><a class="header" href="#usage-38" id="usage-38">Usage</a></h2>
<p><code>relation [FLAGS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#subcommands-10" id="subcommands-10">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/./relation/get.html">get</a>: Get data from a relation</li>
<li><a href="cli/lucky/client/./relation/set.html">set</a>: Set local values on a relation</li>
<li><a href="cli/lucky/client/./relation/list-units.html">list-units</a>: List the units collected to a relation</li>
<li><a href="cli/lucky/client/./relation/list-ids.html">list-ids</a>: List relation ids connected to this unit</li>
</ul>
<h1><a class="header" href="#get-5" id="get-5">get</a></h1>
<p>Get data from a relation</p>
<h2><a class="header" href="#usage-39" id="usage-39">Usage</a></h2>
<p><code>get [FLAGS] [OPTIONS] [key]</code></p>
<h3><a class="header" href="#flags-9" id="flags-9">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-A</code>, <code>--app</code></td><td></td><td>Get application relation data instead of unit relation data</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-19" id="options-19">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-r</code>, <code>--relation-id</code><code>&lt;relation_id&gt;</code></td><td></td><td>The relation id to get the data from</td></tr>
<tr><td><code>-u</code>, <code>--remote-unit</code><code>&lt;remote_unit_name&gt;</code></td><td></td><td>The name of the remote unit to get data from</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-21" id="positionals-21">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>Optional key to get from the data</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-3" id="set-3">set</a></h1>
<p>Set local values on a relation</p>
<h2><a class="header" href="#usage-40" id="usage-40">Usage</a></h2>
<p><code>set [FLAGS] [OPTIONS] &lt;data&gt;...</code></p>
<h3><a class="header" href="#flags-10" id="flags-10">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-A</code>, <code>--app</code></td><td></td><td>Set application relation data instead of unit relation data. the unit must be the leader unit to set application relation data</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-20" id="options-20">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-r</code>, <code>--relation-id</code><code>&lt;relation_id&gt;</code></td><td></td><td>The relation id to get the data from</td></tr>
</tbody>
</table>
<h3><a class="header" href="#positionals-22" id="positionals-22">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;data&gt;</code></td><td></td><td>The data to set on the relation as <code>key=value</code> pairs separated by spaces</td></tr>
</tbody>
</table>
<h1><a class="header" href="#list-units" id="list-units">list-units</a></h1>
<p>List the units collected to a relation</p>
<h2><a class="header" href="#usage-41" id="usage-41">Usage</a></h2>
<p><code>list-units [FLAGS] [OPTIONS]</code></p>
<h3><a class="header" href="#options-21" id="options-21">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-r</code>, <code>--relation-id</code><code>&lt;relation_id&gt;</code></td><td></td><td>The relation id to list the connected units for</td></tr>
</tbody>
</table>
<h1><a class="header" href="#list-ids" id="list-ids">list-ids</a></h1>
<p>List relation ids connected to this unit</p>
<h2><a class="header" href="#usage-42" id="usage-42">Usage</a></h2>
<p><code>list-ids [FLAGS] [OPTIONS]</code></p>
<h3><a class="header" href="#options-22" id="options-22">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-n</code>, <code>--relation-name</code><code>&lt;relation_name&gt;</code></td><td></td><td>The specific name of the relation ( from the metadata.yaml )</td></tr>
</tbody>
</table>
<h1><a class="header" href="#leader" id="leader">leader</a></h1>
<p>Communicate as/with unit leader</p>
<h2><a class="header" href="#usage-43" id="usage-43">Usage</a></h2>
<p><code>leader [FLAGS] &lt;SUBCOMMAND&gt;</code></p>
<h3><a class="header" href="#subcommands-11" id="subcommands-11">Subcommands</a></h3>
<ul>
<li><a href="cli/lucky/client/./leader/get.html">get</a>: Get data from the leader unit</li>
<li><a href="cli/lucky/client/./leader/set.html">set</a>: Set values as the leader charm</li>
<li><a href="cli/lucky/client/./leader/is-leader.html">is-leader</a>: Get whether or not this unit is the leader unit</li>
</ul>
<h1><a class="header" href="#get-6" id="get-6">get</a></h1>
<p>Get data from the leader unit</p>
<h2><a class="header" href="#usage-44" id="usage-44">Usage</a></h2>
<p><code>get [FLAGS] [key]</code></p>
<h3><a class="header" href="#positionals-23" id="positionals-23">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;key&gt;</code></td><td></td><td>Optional key to get from the data</td></tr>
</tbody>
</table>
<h1><a class="header" href="#set-4" id="set-4">set</a></h1>
<p>Set values as the leader charm</p>
<h2><a class="header" href="#usage-45" id="usage-45">Usage</a></h2>
<p><code>set [FLAGS] &lt;data&gt;...</code></p>
<h3><a class="header" href="#positionals-24" id="positionals-24">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;data&gt;</code></td><td></td><td>The data to set as the leader as <code>key=value</code> pairs separated by spaces</td></tr>
</tbody>
</table>
<h1><a class="header" href="#is-leader" id="is-leader">is-leader</a></h1>
<p>Get whether or not this unit is the leader unit. Returns &quot;true&quot; if unit is leader and &quot;false&quot; if it is not.</p>
<h2><a class="header" href="#usage-46" id="usage-46">Usage</a></h2>
<p><code>is-leader [FLAGS]</code></p>
<h1><a class="header" href="#random" id="random">random</a></h1>
<p>Generate random passwords, numbers, and ports. Without any arguments it generates a random sequence of 24 letters and numbers.</p>
<h2><a class="header" href="#usage-47" id="usage-47">Usage</a></h2>
<p><code>random [FLAGS] [OPTIONS]</code></p>
<h3><a class="header" href="#flags-11" id="flags-11">Flags</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-p</code>, <code>--available-port</code></td><td></td><td>Get a random available port. This may be combined with --range to get a random available port in the given range. The default port range is 1024-65535. If an available port cannot be found in the given range the nextavailable port starting at 1024 will be selected</td></tr>
<tr><td><code>-f</code>, <code>--float</code></td><td></td><td>Generate a floating point range instead of an integer range</td></tr>
</tbody>
</table>
<h3><a class="header" href="#options-23" id="options-23">Options</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>-r</code>, <code>--range</code><code>&lt;lowest_number&gt; &lt;highest_number&gt;</code></td><td></td><td>Generate a random integer in a range</td></tr>
<tr><td><code>-l</code>, <code>--length</code><code>&lt;length&gt;</code></td><td></td><td>Set the length of the generated string</td></tr>
</tbody>
</table>
<h1><a class="header" href="#get-resource" id="get-resource">get-resource</a></h1>
<p>Get the path to a Juju resource. NOTE: This path is the path to the resource on the host and will not be accessible if called from a container. This may be fixed later.</p>
<h2><a class="header" href="#usage-48" id="usage-48">Usage</a></h2>
<p><code>get-resource [FLAGS] [resource_name]</code></p>
<h3><a class="header" href="#positionals-25" id="positionals-25">Positionals</a></h3>
<table>
<thead><tr><th>Arg</th><th>Environment Variable</th><th>Description</th><tr></thead>
<tbody>
<tr><td><code>&lt;resource_name&gt;</code></td><td></td><td>The name of the resource to get as defined in the metadata.yaml file</td></tr>
</tbody>
</table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
